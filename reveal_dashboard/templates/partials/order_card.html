<div class="card order-card">
    <div class="card-header order-card-header">
        <span class="order-id">طلب #{{ order.order_id }}</span>
        <span class="badge bg-secondary">{{ order.created_at|date:"h:i A" }}</span>
    </div>
    <div class="card-body order-card-body">
        <h6 class="card-title">{{ order.customer_name }}</h6>
        <ul>
            {% for item in order.items %}
                <li>{{ item.name }} (x{{ item.quantity }})</li>
            {% endfor %}
        </ul>
        <p class="card-text fw-bold">الإجمالي: {{ order.total_price|floatformat:2 }} د.ل</p>
    </div>
    <div class="card-footer order-card-footer">
        <!-- الأزرار تتغير حسب حالة الطلب -->
        {% if order.status == 'pending' %}
            <a href="{% url 'core:update_order_status' order_id=order.id status='accepted' %}" class="btn btn-sm btn-success">قبول</a>
            <a href="{% url 'core:update_order_status' order_id=order.id status='cancelled' %}" class="btn btn-sm btn-danger">رفض</a>
        {% elif order.status == 'accepted' %}
            <a href="{% url 'core:update_order_status' order_id=order.id status='preparing' %}" class="btn btn-sm btn-primary">بدء التجهيز</a>
        {% elif order.status == 'preparing' %}
            <a href="{% url 'core:update_order_status' order_id=order.id status='ready' %}" class="btn btn-sm btn-info">جاهز للاستلام</a>
        {% elif order.status == 'ready' %}
            <a href="{% url 'core:update_order_status' order_id=order.id status='completed' %}" class="btn btn-sm btn-secondary">تم التسليم</a>
        {% endif %}
    </div>
</div>
