{% extends 'base.html' %}
{% load static %}

{% block title %}إدارة الطلبات{% endblock %}

{% block page_css %}
    <link rel="stylesheet" href="{% static 'css/orders.css' %}">
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mt-4 mb-0">إدارة الطلبات</h1>
    <button class="btn btn-secondary" onclick="location.reload();">
        <i class="fas fa-sync-alt me-2"></i>تحديث
    </button>
</div>

<!-- رسائل Django -->
{% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}
{% endif %}

<div class="orders-board">
    <!-- عمود الطلبات الجديدة (Pending) -->
    <div class="order-column">
        <div class="column-header bg-warning text-dark">
            <h5><i class="fas fa-inbox me-2"></i>طلبات جديدة</h5>
        </div>
        <div class="column-body">
            {% for order in pending_orders %}
                {% include 'partials/order_card.html' with order=order %}
            {% empty %}
                <p class="text-center text-muted p-3">لا توجد طلبات جديدة.</p>
            {% endfor %}
        </div>
    </div>

    <!-- عمود الطلبات قيد التجهيز (Accepted/Preparing) -->
    <div class="order-column">
        <div class="column-header bg-primary text-white">
            <h5><i class="fas fa-cogs me-2"></i>قيد التجهيز</h5>
        </div>
        <div class="column-body">
            {% for order in processing_orders %}
                {% include 'partials/order_card.html' with order=order %}
            {% empty %}
                <p class="text-center text-muted p-3">لا توجد طلبات قيد التجهيز.</p>
            {% endfor %}
        </div>
    </div>

    <!-- عمود الطلبات الجاهزة (Ready) -->
    <div class="order-column">
        <div class="column-header bg-success text-white">
            <h5><i class="fas fa-check-circle me-2"></i>جاهزة للاستلام</h5>
        </div>
        <div class="column-body">
            {% for order in ready_orders %}
                {% include 'partials/order_card.html' with order=order %}
            {% empty %}
                <p class="text-center text-muted p-3">لا توجد طلبات جاهزة.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
